@model VConnect.Models.ActivitiesSectionViewModel

<section class="activities-wrap container-fluid px-4 py-5">
    <div class="row g-4 align-items-start">
        <!-- Cards carousel: wider -->
        <div class="col-12 col-lg-9 order-2 order-lg-1">
            @{
                // Show 4 cards per slide on desktop (fallback to Model value if set)
                int n = Model.CardsPerSlide > 0 ? Model.CardsPerSlide : 4;
                var slides = Model.Cards
                .Select((card, idx) => new { card, idx })
                .GroupBy(x => x.idx / n)
                .Select(g => g.Select(x => x.card).ToList())
                .ToList();
                string carId = "activitiesCarousel";
            }

            <div id="@carId" class="carousel slide" data-bs-ride="carousel" data-bs-interval="@Model.IntervalMs">
                <div class="carousel-inner">
                    @for (int s = 0; s < slides.Count; s++)
                    {
                        <div class="carousel-item @(s == 0 ? "active" : "")">
                            <div class="row g-4">
                                @foreach (var c in slides[s])
                                {
                                    <div class="col-12 col-md-6 col-lg-3">
                                        <a class="activity-card d-block text-decoration-none" href="@(string.IsNullOrWhiteSpace(c.LinkUrl) ? "#" : c.LinkUrl)">
                                            <div class="activity-img-wrap">
                                                <img src="@Url.Content(c.ImageUrl)" class="img-fluid w-100" alt="@c.Title" />
                                            </div>
                                            <div class="activity-body">
                                                <h3 class="activity-title">@c.Title</h3>
                                                <div class="activity-pills">
                                                    <span class="pill">@c.City</span>
                                                    <span class="pill">@c.DateText</span>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                }
                            </div>
                        </div>
                    }
                </div>

                <!-- controls -->
                <button class="carousel-control-prev" type="button" data-bs-target="#@carId" data-bs-slide="prev" aria-label="Previous">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#@carId" data-bs-slide="next" aria-label="Next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </div>

        <!-- Aside: narrower -->
        <div class="col-12 col-lg-3 order-1 order-lg-2">
            <div class="activities-aside">
                <div class="eyebrow">○○ @Model.Eyebrow</div>
                <h2 class="activities-heading">
                    @Model.HeadingLine1<br />
                    @Model.HeadingLine2<br />
                    @Model.HeadingLine3
                </h2>
                <a class="btn btn-warning rounded-pill fw-bold px-4 py-2" href="Case">View All Activities</a>
            </div>
        </div>
    </div>
</section>




<style>
    .activities-wrap {
        max-width: 100%;
        padding-top: 4rem;
        padding-bottom: 4rem;
        min-height: 580px;
        margin-top: 6rem;
    }

        /* tighter column gutters */
        .activities-wrap .row.g-4 {
            --bs-gutter-x: 1rem;
        }

    /* right-side text block */
    .activities-aside .eyebrow {
        color: #6b7280;
        font-weight: 600;
        letter-spacing: .02em;
        margin-bottom: .25rem;
    }

    .activities-heading {
        color: #111;
        font-weight: 800;
        line-height: 1.1;
        font-size: clamp(2rem, 5vw, 4rem);
        margin: 0 0 1.25rem;
    }

    /* ---- Card look ---- */
    .activity-card {
        display: flex; /* lets body stretch */
        flex-direction: column;
        height: 100%; /* equal height across row */
        border-radius: 18px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0,0,0,0.06);
        background: #1d1f2e; /* blackish */
        transition: transform .2s ease, box-shadow .2s ease;
        color: #fff;
    }

        .activity-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 28px rgba(0,0,0,0.12);
        }

    /* Larger image area */
    .activity-img-wrap {
        /* prefer a fixed visual height so cards feel taller on desktop,
           but keep responsive on small screens */
        height: clamp(220px, 34vh, 360px);
        overflow: hidden;
        background: #ddd;
    }

        .activity-img-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

    /* Card body fills remaining height */
    .activity-body {
        flex: 1 1 auto; /* grow to fill */
        padding: 16px 18px 18px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .activity-title {
        font-size: 1.15rem; /* a touch larger */
        font-weight: 700;
        margin: 0 0 0.9rem;
    }

    .activity-pills {
        display: flex;
        gap: .5rem;
        flex-wrap: wrap;
        margin-top: .25rem;
    }

        .activity-pills .pill {
            background: #ffd700;
            color: #111; /* black text for contrast */
            font-weight: 700;
            border-radius: 999px;
            padding: 6px 12px;
            font-size: .85rem;
        }

    /* Carousel controls */
    #activitiesCarousel .carousel-control-prev,
    #activitiesCarousel .carousel-control-next {
        width: 44px;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,.35));
    }

    /* Make columns stretch so all cards equal height (works without markup changes) */
    .activities-wrap .carousel-item .row > [class*="col-"] {
        display: flex;
    }

        .activities-wrap .carousel-item .row > [class*="col-"] > .activity-card {
            width: 100%;
        }

</style>
