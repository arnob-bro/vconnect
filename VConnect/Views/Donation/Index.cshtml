@model VConnect.Models.DonationViewModel

@{
    ViewData["Title"] = "Support Our Mission - VConnect";
}

<div class="container py-5 mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Header Section -->
            <div class="text-center mb-5">
                <h1 class="text-vol mb-3" style="font-weight: 800; font-size: 3rem;">
                    <i class="fas fa-heart text-warning me-3"></i>Make a Difference
                </h1>
                <p class="text-light lead" style="font-size: 1.4rem;">
                    Your support helps us create positive change in communities worldwide
                </p>
            </div>

            <div class="card border-0 shadow-lg" style="background: rgba(27, 40, 50, 0.95);
                                                      backdrop-filter: blur(10px);
                                                      border-radius: 20px;">
                <div class="card-header border-0 text-center py-4"
                     style="background: linear-gradient(135deg, #0b3d2e 0%, #1a5e48 100%);
                            border-radius: 20px 20px 0 0 !important;">
                    <h2 class="text-light mb-0" style="font-weight: 700; font-size: 2rem;">
                        <i class="fas fa-hand-holding-heart me-2"></i>Donation Details
                    </h2>
                </div>

                <div class="card-body p-5">
                    <form asp-action="Process" method="post" class="needs-validation" novalidate>
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger rounded-pill mb-4"></div>

                        <!-- Donation Amount Section -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h4 class="text-warning mb-4" style="font-weight: 600;">
                                    <i class="fas fa-coins me-2"></i>Select Amount
                                </h4>

                                <div class="row g-3">
                                    @for (int i = 0; i < Model.DonationOptions.Count; i++)
                                    {
                                        <div class="col-md-4 col-sm-6">
                                            <div class="donation-option-card @(Model.DonationOptions[i].IsSelected ? "selected" : "")"
                                                 onclick="selectAmount(@Model.DonationOptions[i].Amount, this)">
                                                <input type="radio" asp-for="CustomAmount" value="@Model.DonationOptions[i].Amount"
                                                       class="d-none" id="amount-@i">
                                                <div class="text-center p-4" style="border: 2px solid rgba(255,215,0,0.3);
                                                                                       border-radius: 15px;
                                                                                       cursor: pointer;
                                                                                       transition: all 0.3s ease;">
                                                    <h5 class="text-warning mb-2" style="font-weight: 700;">$@Model.DonationOptions[i].Amount</h5>
                                                    <p class="text-light small mb-0">@Model.DonationOptions[i].Description</p>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>

                                <!-- Custom Amount -->
                                <div class="mt-4">
                                    <label class="form-label text-light" style="font-weight: 600;">
                                        <i class="fas fa-pen me-2 text-warning"></i>Or enter custom amount
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text" style="background: rgba(255,255,255,0.1);
                                                                              border: 2px solid rgba(255,255,255,0.2);
                                                                              color: #fff;">$</span>
                                        <input asp-for="CustomAmount" type="number" class="form-control form-control-lg"
                                               style="background: rgba(255,255,255,0.1);
                                                      border: 2px solid rgba(255,255,255,0.2);
                                                      color: #fff;
                                                      border-radius: 12px;"
                                               placeholder="Enter amount" min="1" step="1">
                                    </div>
                                    <span asp-validation-for="CustomAmount" class="text-warning small d-block mt-2"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Donation Type -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h4 class="text-warning mb-3" style="font-weight: 600;">
                                    <i class="fas fa-calendar me-2"></i>Donation Type
                                </h4>
                                <div class="btn-group w-100" role="group">
                                    <input type="radio" class="btn-check" name="DonationType" id="onetime" value="One-time" autocomplete="off" checked>
                                    <label class="btn btn-outline-warning" for="onetime" style="border-radius: 12px 0 0 12px;">
                                        <i class="fas fa-star me-2"></i>One-time
                                    </label>

                                    <input type="radio" class="btn-check" name="DonationType" id="monthly" value="Monthly" autocomplete="off">
                                    <label class="btn btn-outline-warning" for="monthly" style="border-radius: 0 12px 12px 0;">
                                        <i class="fas fa-sync me-2"></i>Monthly
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Personal Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h4 class="text-warning mb-4" style="font-weight: 600;">
                                    <i class="fas fa-user me-2"></i>Your Information
                                </h4>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label asp-for="FullName" class="form-label text-light" style="font-weight: 600;"></label>
                                        <input asp-for="FullName" class="form-control form-control-lg"
                                               style="background: rgba(255,255,255,0.1);
                                                      border: 2px solid rgba(255,255,255,0.2);
                                                      color: #fff;
                                                      border-radius: 12px;"
                                               placeholder="Enter your full name">
                                        <span asp-validation-for="FullName" class="text-warning small d-block mt-2"></span>
                                    </div>

                                    <div class="col-md-6">
                                        <label asp-for="Email" class="form-label text-light" style="font-weight: 600;"></label>
                                        <input asp-for="Email" class="form-control form-control-lg"
                                               style="background: rgba(255,255,255,0.1);
                                                      border: 2px solid rgba(255,255,255,0.2);
                                                      color: #fff;
                                                      border-radius: 12px;"
                                               placeholder="Enter your email">
                                        <span asp-validation-for="Email" class="text-warning small d-block mt-2"></span>
                                    </div>

                                    <div class="col-md-6">
                                        <label asp-for="Phone" class="form-label text-light" style="font-weight: 600;"></label>
                                        <input asp-for="Phone" class="form-control form-control-lg"
                                               style="background: rgba(255,255,255,0.1);
                                                      border: 2px solid rgba(255,255,255,0.2);
                                                      color: #fff;
                                                      border-radius: 12px;"
                                               placeholder="Enter your phone number">
                                        <span asp-validation-for="Phone" class="text-warning small d-block mt-2"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dedication Section -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="form-check form-switch mb-3">
                                    <input asp-for="IsDedicated" class="form-check-input"
                                           style="background: rgba(255,255,255,0.2);
                                                  border-color: #ffd700;"
                                           onchange="toggleDedication()">
                                    <label asp-for="IsDedicated" class="form-check-label text-light" style="font-weight: 600;">
                                        Dedicate this donation
                                    </label>
                                </div>

                                <div id="dedicationSection" style="display: none;">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label asp-for="DedicatedTo" class="form-label text-light" style="font-weight: 600;"></label>
                                            <input asp-for="DedicatedTo" class="form-control form-control-lg"
                                                   style="background: rgba(255,255,255,0.1);
                                                          border: 2px solid rgba(255,255,255,0.2);
                                                          color: #fff;
                                                          border-radius: 12px;"
                                                   placeholder="Name of person/organization">
                                        </div>

                                        <div class="col-md-6">
                                            <label asp-for="DedicationMessage" class="form-label text-light" style="font-weight: 600;"></label>
                                            <textarea asp-for="DedicationMessage" class="form-control form-control-lg"
                                                      style="background: rgba(255,255,255,0.1);
                                                             border: 2px solid rgba(255,255,255,0.2);
                                                             color: #fff;
                                                             border-radius: 12px;"
                                                      rows="2" placeholder="Optional message"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Processing Fees -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="form-check form-switch">
                                    <input asp-for="CoverProcessingFees" class="form-check-input"
                                           style="background: rgba(255,255,255,0.2);
                                                  border-color: #ffd700;">
                                    <label asp-for="CoverProcessingFees" class="form-check-label text-light" style="font-weight: 600;">
                                        Cover processing fees (+2.9%)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center mt-5">
                            <button type="submit" class="btn btn-warning btn-lg py-3 px-5"
                                    style="font-weight: 700;
                                           font-size: 1.3rem;
                                           border-radius: 50px;
                                           background: linear-gradient(45deg, #ffd700, #ffaa00);
                                           border: none;
                                           color: #000;">
                                <i class="fas fa-lock me-2"></i>Donate Securely
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Impact Stats -->
            <div class="row mt-5 text-center">
                <div class="col-md-4 mb-4">
                    <div class="text-warning" style="font-size: 2.5rem; font-weight: 700;">
                        <i class="fas fa-users"></i>
                    </div>
                    <h4 class="text-light">10,000+</h4>
                    <p class="text-light">Lives Impacted</p>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="text-warning" style="font-size: 2.5rem; font-weight: 700;">
                        <i class="fas fa-globe-americas"></i>
                    </div>
                    <h4 class="text-light">25+</h4>
                    <p class="text-light">Communities Served</p>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="text-warning" style="font-size: 2.5rem; font-weight: 700;">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <h4 class="text-light">$2M+</h4>
                    <p class="text-light">Raised Since 2020</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .donation-option-card.selected div {
            border-color: #ffd700 !important;
            background: rgba(255, 215, 0, 0.1) !important;
            transform: scale(1.05);
        }

        .donation-option-card:hover div {
            border-color: #ffd700 !important;
            background: rgba(255, 215, 0, 0.05);
        }

        .form-control:focus {
            background: rgba(255,255,255,0.15) !important;
            border-color: #ffd700 !important;
            box-shadow: 0 0 0 0.2rem rgba(255, 215, 0, 0.25) !important;
            color: #fff !important;
        }

        .btn-outline-warning {
            color: #ffd700;
            border-color: #ffd700;
        }

            .btn-outline-warning:hover,
            .btn-check:checked + .btn-outline-warning {
                background-color: #ffd700;
                border-color: #ffd700;
                color: #000;
            }
    </style>
}

@section Scripts {
    <script>
        function selectAmount(amount, element) {
            // Remove selected class from all options
            document.querySelectorAll('.donation-option-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selected class to clicked option
            element.classList.add('selected');

            // Set the custom amount value
            document.querySelector('[name="CustomAmount"]').value = amount;
        }

        function toggleDedication() {
            const dedicationSection = document.getElementById('dedicationSection');
            dedicationSection.style.display = document.getElementById('IsDedicated').checked ? 'block' : 'none';
        }
    </script>
}